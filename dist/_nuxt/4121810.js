(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{291:function(t,e,r){var content=r(299);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(56).default)("685947ee",content,!0,{sourceMap:!1})},298:function(t,e,r){"use strict";r(291)},299:function(t,e,r){var o=r(55)(!1);o.push([t.i,".tappay[data-v-56ac2464]{width:70%;margin:auto}",""]),t.exports=o},310:function(t,e,r){"use strict";r.r(e);r(4),r(3),r(1),r(5),r(2),r(6);var o=r(0),n=(r(18),r(19),r(66));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={head:function(){return{title:"Payment"}},data:function(){return{tappayData:{prime:"",amount:0,merchant_id:"siloah_CTBC",details:"",cardholder:{phone_number:"",name:"",email:""}}}},computed:l(l(l({},Object(n.b)("form",["GET_FORM"])),Object(n.b)(["GET_GROUPNUMBER"])),{},{valEmailState:function(){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.tappayData.cardholder.email)},valNameState:function(){return this.tappayData.cardholder.name.length>=2},valPhoneState:function(){return this.tappayData.cardholder.phone_number.length>=6}}),mounted:function(){function t(t){$(t).addClass("has-error"),$(t).removeClass("has-success")}function e(t){$(t).removeClass("has-error"),$(t).addClass("has-success")}function r(t){$(t).removeClass("has-error"),$(t).removeClass("has-success")}this.tappayData.details=this.GET_GROUPNUMBER,this.tappayData.cardholder.phone_number=this.GET_FORM.regPhoneCode+this.GET_FORM.regPhoneNumber,this.tappayData.cardholder.name=this.GET_FORM.regLastname+this.GET_FORM.regFirstname,this.tappayData.cardholder.email=this.GET_FORM.regEmail,this.tappayData.amount=this.GET_FORM.regTotalPrice,TPDirect.setupSDK(16793,"app_zCImCZAJruKAPRC2nKemqebjVbDX2GAx9MFtuylDGcfyFFHOEZnAiej4UmKT","sandbox"),TPDirect.card.setup({fields:{number:{element:".form-control.card-number",placeholder:"**** **** **** ****"},expirationDate:{element:document.getElementById("tappay-expiration-date"),placeholder:"MM / YY"},ccv:{element:$(".form-control.cvc")[0],placeholder:"後三碼"}},styles:{input:{color:"gray"},"input.ccv":{},":focus":{color:"black"},".valid":{color:"green"},".invalid":{color:"red"},"@media screen and (max-width: 400px)":{input:{color:"orange"}}}}),TPDirect.card.onUpdate((function(o){o.canGetPrime?$('button[type="submit"]').removeAttr("disabled"):$('button[type="submit"]').attr("disabled",!0);var n="unknown"===o.cardType?"":o.cardType;$("#cardtype").text(n),2===o.status.number?t(".card-number-group"):0===o.status.number?e(".card-number-group"):r(".card-number-group"),2===o.status.expiry?t(".expiration-date-group"):0===o.status.expiry?e(".expiration-date-group"):r(".expiration-date-group"),2===o.status.cvc?t(".cvc-group"):0===o.status.cvc?e(".cvc-group"):r(".cvc-group")}))},methods:{onSubmit:function(t){var e=this;if(t.preventDefault(),this.valEmailState)if(this.valNameState)if(this.valPhoneState){if(!1===TPDirect.card.getTappayFieldsStatus().canGetPrime)return void alert("can not get prime");TPDirect.card.getPrime((function(t){if(0===t.status){if(t.card.prime){e.tappayData.prime=t.card.prime;var data=JSON.stringify(e.tappayData);fetch("http://localhost/tappayPay/credit.php",{method:"post",body:data}).then((function(t){return t.json()})).then((function(data){0===JSON.parse(data).status&&$nuxt.$router.push("thank")})).catch((function(t){console.error("Error:",t)}))}}else alert("get prime error "+t.msg)}))}else this.$refs.ph.$el.focus();else this.$refs.nm.$el.focus();else this.$refs.em.$el.focus()}}},d=(r(298),r(39)),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tappay"},[r("b-form",{on:{submit:t.onSubmit}},[r("b-col",{staticClass:"pl-0 pr-0"},[r("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email address")]),t._v(" "),r("b-form-input",{ref:"em",staticClass:"form-control",attrs:{type:"email",id:"exampleInputEmail1",placeholder:"Email",state:t.valEmailState},model:{value:t.tappayData.cardholder.email,callback:function(e){t.$set(t.tappayData.cardholder,"email",e)},expression:"tappayData.cardholder.email"}})],1),t._v(" "),r("b-col",{staticClass:"mt-3 pl-0 pr-0"},[r("label",{attrs:{for:"exampleInputName"}},[t._v("Card Holder Name")]),t._v(" "),r("b-form-input",{ref:"nm",staticClass:"form-control",attrs:{type:"text",id:"exampleInputName",placeholder:"Card Holder Name",state:t.valNameState},model:{value:t.tappayData.cardholder.name,callback:function(e){t.$set(t.tappayData.cardholder,"name",e)},expression:"tappayData.cardholder.name"}})],1),t._v(" "),r("b-col",{staticClass:"mt-3 pl-0 pr-0"},[r("label",{attrs:{for:"contactNumber"}},[t._v("Contact Number")]),t._v(" "),r("b-form-input",{ref:"ph",staticClass:"form-control",attrs:{type:"text",id:"contactNumber",placeholder:"Contact Number",state:t.valPhoneState},model:{value:t.tappayData.cardholder.phone_number,callback:function(e){t.$set(t.tappayData.cardholder,"phone_number",e)},expression:"tappayData.cardholder.phone_number"}})],1),t._v(" "),r("b-col",{staticClass:"card-number-group mt-3 pl-0 pr-0"},[r("label",{staticClass:"control-label",attrs:{for:"card-number"}},[r("span",{attrs:{id:"cardtype"}}),t._v("卡號")]),t._v(" "),r("div",{staticClass:"form-control card-number"})]),t._v(" "),r("b-col",{staticClass:"expiration-date-group mt-3 pl-0 pr-0"},[r("label",{staticClass:"control-label",attrs:{for:"expiration-date"}},[t._v("卡片到期日")]),t._v(" "),r("div",{staticClass:"form-control expiration-date",attrs:{id:"tappay-expiration-date"}})]),t._v(" "),r("b-col",{staticClass:"form-group cvc-group mt-3 pl-0 pr-0"},[r("label",{staticClass:"control-label",attrs:{for:"cvc"}},[t._v("卡片後三碼")]),t._v(" "),r("div",{staticClass:"form-control cvc"})]),t._v(" "),r("div",{staticClass:"amt mt-4"},[r("h4",[t._v("Total Amount: "+t._s(t.tappayData.amount)+" NTD")])]),t._v(" "),r("b-col",{staticClass:"text-center pr-0 mt-4"},[r("b-button",{staticClass:"pl-5 pr-5",attrs:{type:"submit",variant:"warning"}},[t._v("Pay")])],1)],1)],1)}),[],!1,null,"56ac2464",null);e.default=component.exports}}]);